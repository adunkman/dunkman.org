---
layout: notebook
title: XMBC and Hulu
author: Andrew Dunkman
categories:
   - linux
   - xmbc
   - hulu
---

<img src="/images/posts/2011-09-30-xbmc-and-hulu/logos.png" alt="xbmc and hulu logos" class="pullout" />

<p>I recently installed &ldquo;<a href="http://xbmc.org/">XBMC Live</a>,&rdquo; the Ubuntu-based standalone Linux distribution of XBMC (a set-top box-like media application). If you&rsquo;re familiar with <a href="http://boxee.tv">Boxee</a>, Boxee is based off XBMC.</p>

<p>Getting Hulu up and running on XBMC isn&rsquo;t the easiest, and there aren&rsquo;t too many good guides available out there. Steps to get Hulu up and running follow.

<!-- more -->
</p>

<p>TLDR: Check the <a href="#summary">summary</a> if you are impatient. This process is not for those unfamiliar with Linux.</p>

<h2>Downloading and installing XBMC</h2>

<p>I downloaded XBMC Live from <a href="http://xbmc.org/download/">their download page</a>, burned to a DVD, and popped it into my old desktop machine (an old Athlon64 with 1GB of RAM). The live DVD booted quickly, and after playing around for a few minutes, rebooted and installed to the machine.</p>

<h2>Adding Hulu</h2>

<p>Hulu isn&rsquo;t available on XBMC from the get-go (they had it, but Hulu requested it&rsquo;s removal). There&rsquo;s this pretty cool dude, who goes by Bluecop, who has created a plugin and released it in <a href="http://code.google.com/p/bluecop-xbmc-repo/downloads/list">his repository</a>. Download the ZIP file available at that link, copy it to your XBMC box (SFTP is available), and install it by navigating to &rdquo;System &rarr; Add-ons &rarr; Install from ZIP file&hellip;&rdquo; and selecting the file downloaded from Bluecop.</p>

<p>After installing the repository, navigate to &ldquo;Videos &rarr; Add-ons &rarr; Get more&hellip; &rarr; Hulu&rdquo; and install it!</p>

<h2>Updating librtmp</h2>

<p>So close! If you tried it, you&rsquo;ll notice that, although you can look through videos and select items (even from your queue, if you sign in), none will play. If you <code>tail ~/.xbmc/temp/xbmc.log</code>, you&rsquo;ll see that Hulu&rsquo;s video providers aren&rsquo;t responding with &ldquo;handshake 6,&rdquo; but rather &ldquo;handshake 9.&rdquo;</p>

<p>This change was done around March of 2011, and in order to get Hulu working, you&rsquo;ll need to update your version of librtmp (the library which streams the Flash video file from Hulu&rsquo;s servers).</p>

<p>Source of RTMPDump is <a href="http://rtmpdump.mplayerhq.hu/">available to download</a>, and you&rsquo;ll want to copy it to your XBMC box and compile (see the <a href="#summary">summary below</a> for more details).</p>

<p>After building, copy (and replace) the files <code>librtmp.so, librtmp.a, librtmp.so.0</code> from the <code>librtmp</code> folder to <code>/usr/lib/</code>.</p>

<p>And you&rsquo;re all set! Reboot (you can probably get buy with just restarting XBMC, but rebooting doesn&rsquo;t hurt&mdash;so fast!) and you&rsquo;ll be able to watch all the Hulu you can get your hands on.</p>

<h2><a name="summary">Summary</a></h2>

<ol>
   <li>Download <a href="http://xbmc.org/download">XBMC Live CD</a> and burn to disk.</li>
   <li>Install to your media PC&rsquo;s hard disk.</li>
   <li>Download <a href="http://code.google.com/p/bluecop-xbmc-repo/downloads/list">Bluecop&rsquo;s Add-ins repository</a> and copy the ZIP file, without extracting, to your XBMC machine.</li>
   <li>Navigate to &rdquo;System &rarr; Add-ons &rarr; Install from ZIP file&hellip;&rdquo; and select the ZIP file to install the repository.</li>
   <li>Navigate to &ldquo;Videos &rarr; Add-ons &rarr; Get more&hellip; &rarr; Hulu&rdquo; and install the Add-on.</li>
   <li>Download the <a href="http://rtmpdump.mplayerhq.hu/">source of RTMPDump</a> and copy the source to your XBMC machine.</li>
   <li>Compile RTMPDump and replace the XBMC version of librmtp with the new version.
{% highlight bash %}
$ cd rtmpdump/
$ make SYS=posix
$ cd librtmp/
$ sudo cp -f librtmp.so.0 /usr/lib/librtmp.so.0
$ sudo cp -f librtmp.a /usr/lib/librtmp.a
$ cd /usr/lib/
$ sudo ln -s librtmp.so.0 librtmp.so
{% endhighlight %}
   </li>
   <li>Reboot, and enjoy!</li>
</ol>